

## ğŸ¯ é‡æ–°ç²¾å‡†å®šä¹‰ï¼š`get_trend_signals(ts_code, date)` æ¥å£

ä»¥ä¸‹æ¯ä¸ªå­—æ®µçš„é€»è¾‘è§„åˆ™å°†**ä¸¥æ ¼åŸºäºä½ æä¾›çš„å®Œæ•´å­—æ®µåˆ—è¡¨**ï¼Œç¡®ä¿100%å¯å®ç°ã€‚

---

### å­—æ®µ 1ï¼š`price_vs_ma5`

#### ğŸ’¡ ä»·å€¼
åˆ¤æ–­ä»·æ ¼ä¸**çŸ­æœŸè¶‹åŠ¿ï¼ˆ5æ—¥ï¼‰**çš„ç›¸å¯¹ä½ç½®ï¼Œè¯†åˆ«åˆæ­¥çš„çªç ´æˆ–è·Œç ´ä¿¡å·ã€‚

#### ğŸ“¥ æ‰€éœ€å­—æ®µï¼ˆç›´æ¥å¯ç”¨ï¼‰
- `close_qfq`
- `ma_qfq_5`

#### ğŸ“ é€»è¾‘è§„åˆ™
- è·å–**å½“æ—¥**å’Œ**å‰ä¸€äº¤æ˜“æ—¥**çš„ `close_qfq` ä¸ `ma_qfq_5`ã€‚
- **ç©¿è¶Šåˆ¤æ–­**ï¼ˆéœ€ä¸¤æ—¥æ•°æ®ï¼‰ï¼š
  - **å‘ä¸Šç©¿è¶Š**ï¼šå‰ä¸€æ—¥ `close â‰¤ ma5`ï¼Œå½“æ—¥ `close > ma5` â†’ `"crossing_up"`
  - **å‘ä¸‹ç©¿è¶Š**ï¼šå‰ä¸€æ—¥ `close â‰¥ ma5`ï¼Œå½“æ—¥ `close < ma5` â†’ `"crossing_down"`
- **é™æ€ä½ç½®**ï¼ˆè‹¥æœªç©¿è¶Šï¼‰ï¼š
  - å½“æ—¥ `close > ma5` â†’ `"above"`
  - å½“æ—¥ `close < ma5` â†’ `"below"`

> âœ… è¿™æ˜¯çŸ­çº¿äº¤æ˜“çš„æ ¸å¿ƒä¿¡å·ä¹‹ä¸€ã€‚

---

### å­—æ®µ 2ï¼š`ma5_vs_ma20`

#### ğŸ’¡ ä»·å€¼
åˆ¤æ–­**çŸ­æœŸè¶‹åŠ¿ï¼ˆ5æ—¥ï¼‰ä¸ä¸­æœŸè¶‹åŠ¿ï¼ˆ20æ—¥ï¼‰æ˜¯å¦å¯¹é½**ï¼Œæ˜¯è¯†åˆ«ä¸»å‡æµªæˆ–ä¸»è·Œæµªçš„å…³é”®ã€‚

#### ğŸ“¥ æ‰€éœ€å­—æ®µï¼ˆç›´æ¥å¯ç”¨ï¼‰
- `ma_qfq_5`
- `ma_qfq_20`

> âœ… æ¥å£æ˜ç¡®æä¾› `ma_qfq_20`ï¼ˆâ€œç®€å•ç§»åŠ¨å¹³å‡-N=20â€ï¼‰ï¼Œæ— éœ€ä»»ä½•æ›¿ä»£ã€‚

#### ğŸ“ é€»è¾‘è§„åˆ™
- æ¯”è¾ƒå½“æ—¥ `ma_qfq_5` ä¸ `ma_qfq_20` çš„æ•°å€¼ï¼š
  - `ma5 > ma20` â†’ `"bullish_alignment"`ï¼ˆå¤šå¤´æ’åˆ—é›å½¢ï¼‰
  - `ma5 < ma20` â†’ `"bearish_alignment"`ï¼ˆç©ºå¤´æ’åˆ—ï¼‰

> ğŸ“Œ æ³¨æ„ï¼šç»å…¸â€œå¤šå¤´æ’åˆ—â€æ˜¯ MA5 > MA10 > MA20ï¼Œä½†æ­¤å¤„ç®€åŒ–ä¸º MA5 vs MA20 å·²èƒ½åæ˜ æ ¸å¿ƒè¶‹åŠ¿æ–¹å‘ã€‚

---

### å­—æ®µ 3ï¼š`macd_status`

#### ğŸ’¡ ä»·å€¼
MACD æ˜¯**è¶‹åŠ¿+åŠ¨é‡**çš„å¤åˆæŒ‡æ ‡ï¼Œé‡‘å‰/æ­»å‰æ˜¯å¹¿æ³›è®¤å¯çš„äº¤æ˜“ä¿¡å·ã€‚

#### ğŸ“¥ æ‰€éœ€å­—æ®µï¼ˆç›´æ¥å¯ç”¨ï¼‰
- `macd_dif_qfq`ï¼ˆå³ DIFï¼Œå¿«çº¿ï¼‰
- `macd_dea_qfq`ï¼ˆå³ DEAï¼Œæ…¢çº¿/ä¿¡å·çº¿ï¼‰

> âœ… æ¥å£æä¾› `macd_dif_qfq` å’Œ `macd_dea_qfq`ï¼Œå‘½åæ¸…æ™°ã€‚

#### ğŸ“ é€»è¾‘è§„åˆ™ï¼ˆéœ€ä¸¤æ—¥æ•°æ®ï¼‰
- **é‡‘å‰ï¼ˆGolden Crossï¼‰**ï¼š
  - å‰ä¸€æ—¥ï¼š`dif â‰¤ dea`
  - å½“æ—¥ï¼š`dif > dea`
  - â†’ `"golden_cross"`
- **æ­»å‰ï¼ˆDeath Crossï¼‰**ï¼š
  - å‰ä¸€æ—¥ï¼š`dif â‰¥ dea`
  - å½“æ—¥ï¼š`dif < dea`
  - â†’ `"death_cross"`
- **éäº¤å‰æ—¥**ï¼š
  - `dif > dea` ä¸” `dif > 0` â†’ `"positive_momentum"`
  - `dif < dea` ä¸” `dif < 0` â†’ `"negative_momentum"`
  - å…¶ä»–ï¼ˆå¦‚åŒåœ¨é›¶è½´ä¸‹ä½† dif > deaï¼‰â†’ `"recovering"`

---

### å­—æ®µ 4ï¼š`trend_direction`ï¼ˆç»¼åˆåˆ¤æ–­ï¼‰

#### ğŸ’¡ ä»·å€¼
ç»™å‡ºä¸€ä¸ª**ç®€æ´ã€å¯è§£é‡Šçš„æ€»ä½“è¶‹åŠ¿æ–¹å‘**ï¼Œä¾›å¤§æ¨¡å‹å¿«é€Ÿå†³ç­–ã€‚

#### ğŸ“ é€»è¾‘è§„åˆ™ï¼ˆèåˆå¤šä¸ªä¿¡å·ï¼‰
- **ä¸Šæ¶¨ï¼ˆ"up"ï¼‰**ï¼š
  - `ma5 > ma20` **ä¸”**
  - `close > ma5` **ä¸”**
  - MACD éæ­»å‰çŠ¶æ€ï¼ˆå³ `dif >= dea` æˆ–é‡‘å‰ï¼‰
- **ä¸‹è·Œï¼ˆ"down"ï¼‰**ï¼š
  - `ma5 < ma20` **ä¸”**
  - `close < ma5` **ä¸”**
  - MACD éé‡‘å‰çŠ¶æ€ï¼ˆå³ `dif <= dea` æˆ–æ­»å‰ï¼‰
- **æ¨ªç›˜ï¼ˆ"sideways"ï¼‰**ï¼šä¸æ»¡è¶³ä¸Šè¿°ä»»ä¸€æ¡ä»¶ï¼ˆå¦‚å‡çº¿ç¼ ç»•ã€ä»·æ ¼åœ¨å‡çº¿ä¸Šä¸‹éœ‡è¡ï¼‰

> âœ… æ­¤è§„åˆ™è¦æ±‚â€œä»·æ ¼ä½ç½®â€ã€â€œå‡çº¿æ’åˆ—â€ã€â€œMACDåŠ¨é‡â€ä¸‰è€…æ–¹å‘ä¸€è‡´ï¼Œé¿å…å‡ä¿¡å·ã€‚

---

### å­—æ®µ 5ï¼š`trend_strength`ï¼ˆè¶‹åŠ¿å¼ºåº¦ï¼‰

#### ğŸ’¡ ä»·å€¼
åŒºåˆ†â€œæ¸©å’Œä¸Šæ¶¨â€å’Œâ€œå¼ºåŠ¿ä¸»å‡æµªâ€ï¼Œå¯¹ä»“ä½ç®¡ç†å’Œé£é™©æ§åˆ¶è‡³å…³é‡è¦ã€‚

#### ğŸ“¥ æ‰€éœ€å­—æ®µ
- `macd_qfq`ï¼ˆå³ MACD æŸ±çŠ¶å›¾ = (DIF - DEA) Ã— 2ï¼Œéƒ¨åˆ†ç³»ç»Ÿå®šä¹‰ä¸åŒï¼Œä½†å…¶ç»å¯¹å€¼åæ˜ åŠ¨é‡å¼ºåº¦ï¼‰

> âœ… æ¥å£æä¾› `macd_qfq` å­—æ®µï¼ˆâ€œMACDæŒ‡æ ‡-CLOSE, SHORT=12, LONG=26, M=9â€ï¼‰ï¼Œé€šå¸¸å³ä¸ºæŸ±çŠ¶å›¾å€¼ã€‚

#### ğŸ“ é€»è¾‘è§„åˆ™
- è·å–**è¿‘20ä¸ªäº¤æ˜“æ—¥**çš„ `macd_qfq` ç»å¯¹å€¼åºåˆ—ã€‚
- è®¡ç®—å½“æ—¥ `|macd_qfq|` åœ¨20æ—¥åºåˆ—ä¸­çš„**ç™¾åˆ†ä½æ•°**ï¼ˆPercentile Rankï¼‰ï¼š
  - â‰¥ 75% â†’ `"strong"`
  - â‰¤ 25% â†’ `"weak"`
  - å¦åˆ™ â†’ `"moderate"`

> ğŸ’¡ è‹¥æ— æ³•è·å–20æ—¥æ•°æ®ï¼ˆå¦‚æ–°è‚¡ï¼‰ï¼Œå¯å›é€€åˆ°ç»å¯¹é˜ˆå€¼ï¼ˆå¦‚ `|macd_qfq| > 0.5` è§†ä¸º strongï¼Œéœ€æŒ‰è‚¡ä»·å°ºåº¦è°ƒæ•´ï¼‰ã€‚

---

### å­—æ®µ 6ï¼š`momentum_change`ï¼ˆåŠ¨é‡å˜åŒ–ï¼‰

#### ğŸ’¡ ä»·å€¼
åˆ¤æ–­è¶‹åŠ¿æ˜¯åœ¨**åŠ é€Ÿ**è¿˜æ˜¯**è¡°ç«­**ï¼Œé¢„åˆ¤è¶‹åŠ¿å¯æŒç»­æ€§ã€‚

#### ğŸ“¥ æ‰€éœ€å­—æ®µ
- `mtm_qfq`ï¼ˆåŠ¨é‡æŒ‡æ ‡ï¼ŒN=12ï¼‰

> âœ… æ¥å£æä¾› `mtm_qfq`ï¼ˆâ€œåŠ¨é‡æŒ‡æ ‡-CLOSE, N=12, M=6â€ï¼‰

#### ğŸ“ é€»è¾‘è§„åˆ™ï¼ˆéœ€ä¸¤æ—¥æ•°æ®ï¼‰
- **åŠ¨é‡åŠ é€Ÿ**ï¼š
  - `mtm_today > mtm_yesterday` â†’ åŠ¨é‡å¢å¼º
- **åŠ¨é‡è¡°å‡**ï¼š
  - `mtm_today < mtm_yesterday` â†’ åŠ¨é‡å‡å¼±

å…·ä½“åˆ†ç±»ï¼š
- è‹¥ `mtm > 0`ï¼ˆä¸Šæ¶¨åŠ¨é‡ï¼‰ï¼š
  - `mtm_today > mtm_yesterday` â†’ `"accelerating"`
  - å¦åˆ™ â†’ `"decelerating"`
- è‹¥ `mtm < 0`ï¼ˆä¸‹è·ŒåŠ¨é‡ï¼‰ï¼š
  - `mtm_today < mtm_yesterday`ï¼ˆè´Ÿå¾—æ›´å¤šï¼‰â†’ `"accelerating_down"`
  - å¦åˆ™ â†’ `"decelerating_down"`

> ä¸ºç®€åŒ–è¾“å‡ºï¼Œå¯åˆå¹¶ä¸ºï¼š
> - `"accelerating"`ï¼šåŠ¨é‡ç»å¯¹å€¼å¢å¤§
> - `"decelerating"`ï¼šåŠ¨é‡ç»å¯¹å€¼å‡å°
> - `"reversing"`ï¼šåŠ¨é‡ç¬¦å·æ”¹å˜ï¼ˆå¦‚ä»è´Ÿè½¬æ­£ï¼‰

---

## âœ… æ€»ç»“ï¼šåŸºäºå®Œæ•´æ•°æ®çš„ `get_trend_signals` æ¥å£

| å­—æ®µ | åˆ†æä»·å€¼ | Tushare å­—æ®µæ”¯æŒ | æ˜¯å¦éœ€å†å²æ•°æ® |
|------|--------|------------------|--------------|
| `price_vs_ma5` | çŸ­æœŸä»·æ ¼ä½ç½® | `close_qfq`, `ma_qfq_5` | æ˜¯ï¼ˆ1æ—¥ï¼‰ |
| `ma5_vs_ma20` | çŸ­ä¸­è¶‹åŠ¿å¯¹é½ | `ma_qfq_5`, `ma_qfq_20` | å¦ |
| `macd_status` | è¶‹åŠ¿+åŠ¨é‡ä¿¡å· | `macd_dif_qfq`, `macd_dea_qfq` | æ˜¯ï¼ˆ1æ—¥ï¼‰ |
| `trend_direction` | ç»¼åˆè¶‹åŠ¿æ–¹å‘ | ä¸Šè¿°å­—æ®µèåˆ | æ˜¯ |
| `trend_strength` | è¶‹åŠ¿å¼ºåº¦ | `macd_qfq` | æ˜¯ï¼ˆ20æ—¥ï¼‰ |
| `momentum_change` | åŠ¨é‡å˜åŒ– | `mtm_qfq` | æ˜¯ï¼ˆ1æ—¥ï¼‰ |

**ç»“è®º**ï¼šåœ¨å®Œæ•´ç‰ˆ `stk_factor_pro` æ”¯æŒä¸‹ï¼Œ`get_trend_signals` æ¥å£å¯ä»¥**å®Œå…¨åŸºäºåŸå§‹å› å­å®ç°ï¼Œæ— éœ€ä»»ä½•è¿‘ä¼¼æˆ–æ›¿ä»£**ï¼Œé€»è¾‘ä¸¥è°¨ä¸”å®æˆ˜æœ‰æ•ˆã€‚
